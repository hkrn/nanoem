=======================================================
macOS で MMD をつかう方法
=======================================================

.. important::
   単に macOS 上で nanoem を使うだけであればこのドキュメントを読む必要はありません

.. note::
  ※ この部分だけ Mac の話ではなく Windows PC の話です

  * MMD を快適に利用したいのであればラップトップ（ノート）ではなくデスクトップを推奨します

    * MMD を利用するのに重要な高性能な GPU が利用できるからです
    * どうしてもラップトップにする場合でも最低 15 インチ以上を選ぶべきです

      * これより小さいと物理的な制約から高性能な GPU が利用できません

  * MMD を快適に利用する Windows マシン選びのポイントとして

    * 選び方がわからない場合はゲーミング用または VR Ready なものを選びましょう
    * 購入予算は最低でも１２万円、できれば２０万円以上を積んだほうがよいでしょう

      * 安くてももちろん動きますが MMD 用途だとエフェクトをたくさん利用したいという目的がある場合は後悔する可能性があります

    * 予算をかけられないかつラップトップしか選べない場合は 「`学生ゲーム開発者向け 低予算・高性能ノート PC <https://github.com/Reputeless/Laptops>`_」から探すとよいでしょう

  * 詳しくは `「MMDのパソコン選び」 <https://3d-arts.misanyan.com/2567>`_ を参照してください

   2021年1月末に Microsoft からの DirectX9 のエンドユーザランタイムのインストーラのダウンロードが一時的に不可能になりました [#f1]_ が、措置を加えた形で現在はダウンロード可能になっています。

   x86 が生き続ける限りは MMD が動く環境がなくなることはないとみていますが、Mac の Apple Silicon 移行を考えると Windows も他 CPU の流れに沿う可能性は否定できず、今後数年間で「期待通りに」動く環境が減る可能性はあります。
   （MMD が取り巻いてる厳しい状況については「:ref:`10CEA069-F59B-4596-B8D7-2F788303F611`」を参照）

nanoem とは直接関係ないですが、macOS 上で MMD を使う方法を説明するページです。

BootCamp をつかう
==========================================

.. note::
   `Intel Mac でのみ利用可能な方法になります <https://support.apple.com/HT201468>`_。Apple Silicon Mac では利用できません。

macOS に付属する BootCamp を使ってその上で Windows を動かして MMD を使う方法。
Windows メインで macOS をたまに動かす程度ならこの方法が最適でしょう。

* 長所

  * Mac でありながら Windows マシンとして使うことが出来る
  * 最大のパフォーマンスを活用できる

* 短所

  * Windows のライセンス購入必須
  * macOS と Windows の切り替えが起動時しかできない
  * BootCamp 専用のパーティションを切る必要がある
  * macOS のバージョンと対応する Windows のバージョンが強く紐付けられる
  * `外付け GPU に対応していない <https://support.apple.com/ja-jp/HT208544>`_

    * MacBook Air または MacBook Pro で利用する場合はこの点に注意が必要です

仮想マシンをつかう
==========================================

.. note::
   BootCamp とは理由が異なりますがこちらも Intel Mac でのみ利用可能な方法になります。Apple Silicon Mac にも対応する可能性はありますが、仮に対応したとしても

   * 2021年3月現在で単体販売されておらずかつ Insider のみ提供の ARM 版 Windows を利用する必要がある

     * x86 版の Windows を利用することが出来ない [#f2]_

   * x86 のエミュレーション動作になるため遅くなる

     * 特に物理演算で性能影響が出やすい

   以上から仮に対応したとしても素直に x86 CPU ベースの PC を使ったほうが安定動作を期待できるため推奨しません。

無償または有償の仮想マシンソフトウェアを利用してその中で Windows をインストールして MMD を使う方法。
仮想マシンの代表的なソフトウェアとして以下があります（🈶 は有償版のみ）。

- `VMware Fusion <https://www.vmware.com/jp/products/fusion.html>`_ 🈶
- `Parallels Desktop <https://www.parallels.com/jp/products/desktop/>`_ 🈶
- `VirtualBox <https://www.virtualbox.org/>`_

利用実績から実質的に選択肢は上２つのいずれかになるでしょう。macOS をメインにつかいつつ Windows を利用するならこの方法がよいでしょう。

長所
------------------------------------------

* 切り替えが簡単で macOS を動かしながら Windows を使うことが出来る
* パーティションを切る必要がなく他の Mac への移行がファイルコピーで済む

  * ただしファイル移動させて他の Mac で動かす場合 Windows のライセンスの再認証が必要になります

* Windows のバージョンに依存しない

短所
------------------------------------------

* Windows のライセンス購入必須
* （有償の場合）仮想マシンのライセンス購入が必須
* 一回仮想マシンを経由する関係でパフォーマンスが BootCamp に比べると劣る

Unity + MMD4Mechanim をつかう
==========================================

ゲームエンジンのひとつである `Unity <https://www.unity3d.com>`_ とそのプラグインである `MMD4Mechanim <http://stereoarts.jp>`_ 経由でモデル及びモーションをインポートする形で動かす方法です。

長所
------------------------------------------

* Windows を使わないためライセンスコストが一切かからない
* VRM 出力の環境を整備できる

短所
------------------------------------------

* インストールサイズが非常に大きい (2GB 以上)
* 操作方法が全く異なるため、覚え直さないといけない

  * Unity は最近のバージョンで日本語版も選べるようになったが基本的に UI が英語表記

    * 検索で引っかかるドキュメントも大抵は英語表記が前提です

  * MMD4Mechanim はあくまでモデルまたはモーションを読み込めるようにするまででそこからモーションを作成して出力することまではできません

* モデラーのポリシーによってこの方法が使えないことがある

  * モデル付属の README を確認して Unity 上で使えるかどうかを必ず確認してください

    * Unity 上の利用はたいてい目的外利用とみなされます

  * 上記の問題は主に女性向け二次創作モデルで引っかかることが多いです

Wine をつかう
==========================================

Windows API をエミュレーションして Windows アプリケーションを動かすソフトウェアである `Wine <https://www.winehq.org>`_ を使って動かす方法です。
商用版として `CrossOver Mac <https://www.codeweavers.com/>`_ がありますが、実質的に英語版のみです。

長所
------------------------------------------

* Windows を使わないためライセンスコストが一切かからない

  * macOS 上でそのまま動かせる

短所
------------------------------------------

* アプリケーションのルックアンドフィールが macOS とは大きく異なる
* 利用実績が圧倒的に少ないためその分情報が少ない

  * 動かなかったときの対処方法は自分で調べないといけない
  * `AppDB によると動作評価は Bronze または Silver <https://appdb.winehq.org/objectManager.php?sClass=application&iId=13443>`_

.. [#f1] https://www.gamespark.jp/article/2021/02/19/106238.html
.. [#f2] https://news.mynavi.jp/article/20210503-1882583/
