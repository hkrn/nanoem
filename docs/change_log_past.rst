=======================================================
変更履歴 (31.5.0 以前)
=======================================================

31.5.0 (2021/2/22)
******************************************

機能追加
==========================================

* nmm 形式のプロジェクトファイル読み込み時にアクセサリまたはモデルの読み込みが失敗した時何が原因で読めなかったか表示するようにした
* :ref:`A83521E4-540E-4C96-8093-07684B994454` に 「フレームズレ抑止を有効にする」を追加

  * 31.2.0 で導入した書き出し高速化で垂直同期の速度を上回ると動画書き出し結果が不正確になる問題があったため

不具合修正
==========================================

* 言語設定を英語にした時反転ペーストが機能しない
* :ref:`F3B3AAC8-0D8C-4409-8439-8764F37F2962` が実質的に機能しない
* ``plugin_avfoundation`` において音源のデコードに失敗することがある

  * macOS において WAV 音源以外の読み込みに失敗してた原因になってた可能性が高い

* 接続先剛体がないジョイントが含まれたモデルを読み込ませると落ちる

  * ただしそのモデルは MMD で読み込ませると確実に落ちるので注意が必要です

31.4.0 (2021/1/21)
******************************************

不具合修正
==========================================

* 物理演算の焼きこみを行うと落ちる

  * 内部的にはモデルキーフレームにおける物理演算の有効無効の切り替え時に落ちる問題があった

* キーフレームを選択した状態かつ補完曲線表示した状態で巻き戻しを実行すると落ちる
* 言語変更時にアンチエイリアスメニューの消失およびメニューのチェック状態が正しくリストアされない
* メニューの地面影が本来有効なのでチェックされてるべきなのにチェックされてない
* macOS の OS 付属エンコーダを利用して書き出した結果が不正になる

  * 動画書き出しで落ちやすくなる問題をある程度修正して安定性を向上させた

31.3.0 (2021/1/15)
******************************************

仕様変更
==========================================

* モーフ変形時キーフレームに未登録のボーンの変形状態を含めて保存するようにした

  * いままではモーフを変形させるとボーンの変形状態をリセットする仕様だった

* PMX 2.1 で定義されているフリップモーフ及びインパルスモーフを暫定的に実装
* 次バージョンでのソフトボディ対応のためソフトボディ対応の物理演算実装に切り替え

  * 上記により物理演算で動作が変わる可能性があるかもしれません
  * ソフトボディのあるモデルの読み込みは 31.3.0 から対応していますが動作はしません

不具合修正
==========================================

* 頂点が存在しないモデルにおいてモーフ処理が行われない
* nmm 形式のプロジェクト保存時に物理演算の無効及びトレースモード以外の処理モードを選択した場合保存されない
* macOS 版上でプロジェクト保存したときファイルパスに濁点半濁点が含まれると macOS 以外でプロジェクトを開こうとしたときアクセサリまたはモデルが読み込めない

  * macOS 上でしか使わない場合は対応不要です
  * もし macOS 以外で使う場合は影響を受けない macOS 版を利用して以下の対応を行ってください

    * 該当するアクセサリまたはモデルのモーションを一回書き出して 31.3 以降で読み込みし直した上で保存してください
    * アクセサリまたはモデルのファイル名だけでなくフォルダ名も対象となります

* macOS 版において OS 付属のエンコーダ利用時に書き出しすると落ちることがある
* 特定のテクスチャの不正デコードによりそれを利用するテクスチャのアクセサリまたはモデル描画に意図しない描画が発生する
* プロジェクト再生終了時の処理漏れによりアクセサリ、カメラ、光源、セルフシャドウが正しくリセットされない
* Windows 版で初回起動時に落ちる不具合が別要因で残ってた
* Windows 版で再生がかくつく

  * 再生と一時停止を繰り返すと音源の同期補正処理の関係でかくつく問題があります
  * 上記問題は一時停止ではなく停止を行うことにより同期補正処理がリセットされるため、かくつきがなくなります

* 内部的な安定性向上のための対応（落ちる箇所を特定できた箇所について修正）

31.2.0 (2021/1/3)
******************************************

仕様変更
==========================================

* 動画書き出しの処理の見直しにより処理速度を改善

不具合修正
==========================================

* macOS 版において Metal で動作時ウィンドウをリサイズするとレイアウトが崩れる
* macOS 版において Metal で動作時にハングして CPU が高負荷状態のまま反応しないことがある

  * プロジェクトの新規作成、プロジェクトの開き直し、再生もしくは編集時の FPS 変更において高確率に発生する

31.1.0 (2020/12/31)
******************************************

仕様変更
==========================================

* macOS 版において以下の拡張子を nanoem で直接開けるように拡張

  * nma
  * nmd
  * nmm
  * pmd
  * pmm
  * pmx
  * vmd

不具合修正
==========================================

* 既存のモーション流し込みでプロジェクト保存したとき不完全な状態で保存されることがある

  * プロジェクト保存時「不完全なデータが保存されようとしたため保存が中断されました」エラーの原因と同一の可能性あり

* 背景動画が正しく描画されない

  * 31.0.0 の描画処理変更による影響が原因

* 内部変更により ``TEXTUREVALUE`` を利用したエフェクトの処理速度を改善
* モデルごとにレンダーターゲットを必要とするエフェクトにおいてメモリ使用量が激増する
* Metal 上で点描画を利用するエフェクトにおいて異常描画が発生する

31.0.2 (2020/12/25)
******************************************

不具合修正
==========================================

* Windows 版で起動直後に落ちる

31.0.1 (2020/12/25)
******************************************

不具合修正
==========================================

* macOS 版でかつ OpenGL 上での動作時ウィンドウをリサイズしようとすると落ちる

31.0.0 (2020/12/25)
******************************************

機能追加
==========================================

* Apple Silicon Mac の暫定対応

  * 描画処理の全面的な見直しのため Apple Silicon 以外でもパフォーマンスが改善する可能性があります
  * nanoem > Preferences... > 「システム情報」の CPU が ``ARM (64-bit)`` であれば Apple Silicon ネイティブで動作しています

* PMM ファイルの書き出しを実装

  * 注意事項については :ref:`D90328CC-C39A-4854-BB48-B49039D8E31B` を参照してください

* PerMonitor v2 の対応

  * DPI の異なるディスプレイへの切り替えでメニューのフォントサイズが正しく追従するようになります
  * Windows 版のみ

仕様変更
==========================================

* 内部で利用しているグラフィックスライブラリの制限値の引き上げ

  * 31.0 未満を利用している場合は自動的に引き上げされませんので nanoem > Preferences... > Special にある Initialize ボタンを押してください
  * 通常利用で引っかかることはまずありませんが、エフェクトを多用している場合はこれ起因で落ちることがあるため上記による引き上げを推奨します

* Visual Studio 2015 から Visual Studio 2017 のランタイムに切り替え

  * Windows 版のみ

* ミップマップ生成をデフォルトで無効に変更

  * 現状の処理が潜在的に落ちる原因を作ってしまうため

不具合修正
==========================================

* オフスクリーン Main における個々のモデルまたはアクセサリの表示切り替え及び消去が正しく動作しない
* 解像度倍率の異なるディスプレイへの移動時に倍率追従が正しく行われない

  * Windows 版において PerMonitor v2 対応と同時に修正していますが macOS 版も同じように修正しています

* アクセサリ削除時頂点及びインデックスバッファが削除されずメモリ上に残り続ける
* エフェクトのパラメータ画面で特定条件下で落ちる

30.3.0 (2020/10/27)
******************************************

機能追加
==========================================

* emd を読み書きする機能を追加

  * ファイルメニューではなく :ref:`effect` から読み込みする方式です

* モデルまたはアクセサリ名を変更する機能を追加

  * 「:ref:`62EB4D2C-F84D-4B9A-A942-4216F524C01A`」及び「:ref:`806D1D25-22B4-4DE1-AE54-741A02FF923F`」を参照してください

不具合修正
==========================================

* IK 無効化時の IK リンクボーンの無効化処理が正しく行われない

  * 結果として :ref:`EFE0C3B6-39AF-4210-846A-B329D49B2611` の結果が意図しないものになっていた

* :ref:`F3B3AAC8-0D8C-4409-8439-8764F37F2962` 及び :ref:`EFE0C3B6-39AF-4210-846A-B329D49B2611` でモデルモーションの書き出しができない

  * 別モデルを選択してから再度書き出したいモデルを選択することによる回避は可能

* エフェクト利用時 APNG のデコードに失敗すると落ちる
* nmm 形式のプロジェクトファイル読み込み時にモデル名がプロジェクト内に重複してると先にモデルが適用され後からのモデルが読み込めない
* IK 有効時 IK ボーンを動かすと IK リンクが未登録判定される
* 付与親のもつ付与回転または付与移動が適用されない

30.2.0 (2020/9/21)
******************************************

機能追加
==========================================

* 音源及び背景動画を削除してリセットする機能を追加

不具合修正
==========================================

* エフェクト利用時モデル及びアクセサリの加算が効かない
* エラー発生時特定条件下で落ちる

  * エフェクトまたは準標準ボーンプラグイン利用時に発生しやすいが原理的にはそれ以外でも発生する可能性があった

30.1.0 (2020/8/31)
******************************************

機能追加
==========================================

* WAV (PCM) 音源をドラッグアンドドロップで読み込めるようにした

  * プラグインが必要な音源は読み込めないため従来どおりファイルダイアログから読み込んでください

不具合修正
==========================================

* テクスチャ名指定がファイルではなくフォルダになっている場合エラーが発生して読み込めない

  * フォルダ指定の場合テクスチャが存在しないものとして扱い読み込みを続けるようにしました

* ボーンまたはモーフ操作中に不意にカメラ操作が発動しないようにする仕組みを導入
* エフェクトの ``#include`` 句において階層構造が含まれるときにレアケースで機能しないことがある
* カリング無効と有効の材質が両方あると先に出た片方しか反映されない
* プロジェクト読み込みで WAV (PCM) 音源以外読み込まれず無音になる

  * プロジェクト読み込みにおいてプラグインによるデコードが必要な音源の読み込みができていなかったことが原因

* Windows 版で WAV (PCM) 音源をファイルダイアログから開くことができない

30.0.0 (2020/8/12)
******************************************

機能追加
==========================================

* マウスの中央ボタンを押しながらのカメラ移動の追加

  * もともと MMD にあったが nanoem では未実装だったため実装
  * 右上のカメラ移動のアイコンの挙動と同じだが移動幅を抑えるように調整

仕様変更
==========================================

* プロジェクト (nmm 形式) に保存するパスを絶対パスから相対パスに変更

  * 今回の変更により例えば DropBox のようなオンラインストレージでファイル同期を利用した際に別のマシンでも読み込めるようになります
  * 29.2.0 以前に保存したプロジェクトファイルは従来どおり読み込むことが可能ですが、新規プロジェクトでは相対パスで保存されます

    * 設定の切り替えは「:ref:`2F442197-62C2-468A-889A-E4FDF5D6E3F2`」で可能です

* プロジェクト読み込み時にアクセサリ、モデル、モデルの材質に割り当てられたエフェクトの中身がプロジェクト保存時とは違う内容になっていた場合エラーを出すように変更

  * 従来はスキップして読み込まれましたが気づけずファイル消失と勘違いする問題があるため明示的にエラーを出すようにしました

* カメラ変形方式の初期値を ``Global`` から ``Local`` に変更

  * MMD において ``Local`` が初期値であるため追従しました
  * モデルは従来どおり ``Local`` が初期値です

* 画像または動画の書き出しの際にプロジェクト保存を確認するかのダイアログを挟むようにした

  * 動画出力中に落ちる問題が発生することによる巻き戻りが起こることを防ぐために追加

* 画像書き出しの際に未登録のボーンまたはモーフがある場合エラーを出すようにした

  * 画像書き出しは仕様上フレーム移動が発生するため未登録のボーンまたはモーフがあると消失する問題の対策として追加

不具合修正
==========================================

* プロジェクト初期化で落ちることがある
* 編集及び再生中のフレームレートの「無制限」が機能しない
* IK無効化したあとIKリンクの回転がゼロ初期化されずに残り続ける

  * 関連で　IK 有効化無効化の切り替えを即座に反映されるようになりました

* IKリンクのボーンがIKボーンの後ろにあると正常に変形しない
* 右下のハンドル経由でのカメラ移動において ``Local`` が ``Global`` と同じ扱いで処理されていた
* 右上アイコンによるカメラ移動が MMD のそれと違う挙動になっていた
* シフトキー押したときカメラの移動またはズームができない

  * 背景動画操作と干渉してたことが原因であったため、背景動画が読み込まれないときはカメラの高速移動または高速ズームを行えるように修正
  * 背景動画が読み込まれたときは挙動が上書きされるため注意が必要です

* モデルプラグイン実行後に保存されるモデルが MMD で読み込めないものになる
* シフトあるいはコマンド（コントロール）キーを利用したハンドルの移動または回転をすると位置が飛ぶ
* Windows 版において明示的に拡張子をつけないとファイル保存に失敗する

  * 拡張子がなくてもファイル名だけで保存できるように修正しました

29.2.0 (2020/7/20)
******************************************

機能追加
==========================================

* 「:ref:`CCDE11E1-3416-425D-80DF-A347F79E7BDD`」の提供開始
* ファイルが見つからず読み込めないときに何のファイルが読み込めなかったかわかるように改善
* ``plugin_lsmash`` のエンコード処理を非同期で実行するようにし、エンコード速度を改善

不具合修正
==========================================

* IK 付与親のあとに IK ボーンが入ると正しく変形しない
* 不正なモーフのあるグループモーフを操作すると落ちる

29.1.0 (2020/7/1)
******************************************

不具合修正
==========================================

* macOS 10.12 を利用している場合起動直後に落ちる
* IK により変形するボーンを付与親とするボーンが変形しない

  * 27.2.0 までは正常に動作してたが 28.0.0 で当該不具合が発生した

* 言語設定を変更するとモデルまたはモーションのプラグイン一覧が消失する

  * リリース時点では未提供なので影響なし

29.0.0 (2020/6/6)
******************************************

仕様変更
==========================================

* セルフシャドウの計算式を変更

  * 不具合修正によるものだが仕様変更でもあるためここに記載
  * 今回の変更により突然セルフシャドウが消失する問題が発生しにくくなった

* 外付け GPU なしで起動した場合高解像度ビューポートを無効にした

  * 理由については :ref:`2113320B-C307-4C28-819B-1614FC1103E4` を参照

不具合修正
==========================================

* モデル表示の負荷分散が機能しない
* 加算スフィアテクスチャが存在しない材質の描画がされない
* オーディオ出力デバイスの初期化に失敗した場合立ち上がらない
* Windows 版で DirectX の初期化に失敗すると落ちる [#f1]_
* Windows7 上で起動しようとすると特定の関数呼び出し失敗のため立ち上がらない

28.2.0 (2020/4/22)
******************************************

仕様変更
==========================================

* :ref:`D1BF8CFD-152D-4D1C-8B23-1FC6A4EBF391` を初期値で無効にするように変更

  * 有効時にモデルの表示崩れが発生することがあることとモデル表示の負荷分散の設定不具合修正に伴う影響の組み合わせのため
  * macOS 版の 28.1.0 以前を利用している場合でも設定再設定により初期値が無効の状態で起動されます

不具合修正
==========================================

* ScriptExternal を利用するポストエフェクトで材質に対してエフェクトを割り当てると正しく描画されない
* フレーム移動での巻き戻し位置再設定時にひとつ余計に巻き戻る

  * 例えば以下の操作をしたとき本来はキーフレーム操作まで戻りますが、これがボーン移動1まで巻き戻るという不具合です

    * ボーン移動1
    * キーフレーム操作
    * ボーン移動2
    * フレーム操作

* モデルモードでカメラ操作するとそのカメラ操作が巻き戻し操作に対象になってしまい過剰な巻き戻しが発生する

  * 本来はカメラモードに対する巻き戻し操作なので、モデルモードにおけるカメラ操作を巻き戻し操作対象から外しました

* LoopByCount + LoopByCount + LoopGetIndex で最初の LoopByCount の値を撮ってしまう

  * 具体的には ``Numbers_Float4x4.fx`` で表示不具合が発生していた

* オフスクリーン割当エフェクトの頂点テクスチャがプロジェクト単位で参照されてしまうため再利用される問題の修正

  * 具体的にはモデルがふたつ以上ある状態で MotionBlur を利用すると表示不具合が発生していた

* ray-mmd を macOS 上で利用するとき特定のパスのシェーダのコンパイル失敗が原因で正しく表示されない
* macOS で「:ref:`D1BF8CFD-152D-4D1C-8B23-1FC6A4EBF391`」がひとつのモデルに対してしか機能していなかった

  * 全てのモデルに対して処理するように修正

28.1.0 (2020/4/8)
******************************************

機能追加
==========================================

* オフスクリーン及び材質のエフェクト割当で fx/fxsub ファイルのドラッグアンドドロップに対応

  * 割当対象の名前をクリックするとドラッグアンドドロップの対象を指定することができます
  * シフトキーを押しながら割当対象の名前をクリックすると複数指定することができます

    * その場合にドラッグアンドドロップしたときは割当対象全てにエフェクトが適用されます

* プロジェクト、アクセサリ、モデルの読み込みをキャンセルできるようにした
* 「:ref:`88592664-60C0-40B8-B14A-06983999A95D`」を追加

  * 次のバージョンで外付け GPU 利用時でのみ有効にするように仕様を変更予定

仕様変更
==========================================

* ビューポートの透過設定有効時の背景を黒から白とグレーの市松模様に変更

不具合修正
==========================================

* オフスクリーンのエフェクト割当変更ができない
* エフェクトの ``MOUSEPOSITION`` セマンティックが正しく取れない
* エフェクトでファイル名に英数字以外が含まれると正しく読み込まれない
* サブセット指定が正しく認識できない
* アクセサリのサブセットが正しく認識されない

28.0.0 (2020/3/25)
******************************************

.. important::
   エフェクトプラグイン及びそれの関連による本体に大規模な修正が入ったため、特にエフェクト利用において 27.x 以前とは大きく挙動が異なる可能性があります。

   くわえて全てのバージョンで macOS における OpenGL でのエフェクト利用をサポート対象外としました。動作はしますが不具合対応の対象から外されているためご注意ください。

機能追加
==========================================

* エフェクトファイル書き換えに追従する形の自動更新
* ビューポート設定画面に「透過背景を有効にする」を追加

  * 有効にすると透過背景が有効になり、画像及び動画出力時に透過値も反映されます
  * いままではエフェクトを使用すると透過度が無視されていましたが今回の変更により有効にすると反映されるようになります

    * ただしエフェクト側が対応している必要があり、かつ対応するエフェクトのファイルの修正が必要になります
    * 対応方法はエフェクト毎に異なるためエフェクトに付属の README あるいはソースを参照してください

仕様変更
==========================================

* 影処理の変更

  * シャドウマップはモデル描画のみに
  * 地面影描画でもやもやが表示されないように改善

* エフェクトにおける逆行列の処理を正しいものに修正した

  * これにより逆行列を使ったエフェクトに互換性のない変更が発生し得る

* カメラの位置の計算処理を正しいものに修正した

  * 上記と同様エフェクトに影響あるがエッジ幅の表示も影響する

* ミップマップ生成及び異方向フィルタをデフォルトで有効にした

  * ただし OpenGL においてミップマップ処理に問題があるため無効にしています

* 16bit RGBA テクスチャ読み込み時に減色処理しないようにした

不具合修正
==========================================

* エフェクト更新で前のエフェクトで使用したメモリが開放されず残り続ける
* Windows においてアンチエイリアス設定が効かない
* 「モデルの負荷分散」の無効時に追加 UV が機能しない
* Windows 版において「モデルの負荷分散」有効時に頂点数が 65536 を超えるモデルで正しく表示されない
* アクセサリのモーションにおいて表示状態と加算が反映されないことがある
* エフェクト関連で以下を修正（仕様変更になりえるものも含む）

  * ``CULLMODE`` の挙動を修正
  * ``ZENABLE`` の実装
  * ステンシルバッファが機能していなかった不具合
  * アクセサリの ``use_texture`` と ``use_spheremap`` の設定が逆転してた不具合
  * レンダーターゲット及びオフスクリーンのミップマップ生成の対応
  * モデルまたはアクセサリが加算状態かどうかを判定する ``opadd`` の対応
  * ビューポートのサイズに依存するレンダーターゲットで 1.0 以外のものがリサイズ後正しく計算されない不具合
  * サブセット指定において "0" のような特定の材質番号のみ指定を認識できていなかった不具合
  * アクセサリの toon 判定処理がスキップされていた不具合
  * ``normalize`` 計算後に NaN のまま処理されていた部分を 0 に正規化するようにした
  * アクセサリに対する ``CONTROLOBJECT`` でボーン紐付け後の計算が反映されていなかった不具合
  * ``CONTROLOBJECT`` においてアクセサリまたはモデルが見つからない場合の初期値設定が正しく行われてなかった不具合
  * ``matrix._11_12_13_14`` のような取得指定が正しく変換されていなかった不具合
  * 「透過背景を有効にする」機能追加により Clear のアルファ値を強制的に 1 にする処理を削除
  * ``ELAPSEDTIME`` セマンティックスの挙動修正
  * オフスクリーン利用時はアルファ値を必ず書き込むようにした
  * オフスクリーン描画時に MRT を使おうとすると落ちる
  * オフスクリーンの描画対象指定の ``none`` を実装
  * ミップマップ生成された画像がおかしなものになる不具合
  * アクセサリで地面影を描画するパスに ``object_ss`` を使うようにした
  * ``MME_MIPMAP`` の対応
  * ``ANIMATEDTEXTURE`` の暫定対応

    * APNG のみ対応 (MME では GIF も対応するが未対応)
    * APNG の仕様に完全準拠ではなく何らかの不具合が発生する可能性がある

27.2.0 (2020/2/14)
******************************************

機能追加
==========================================

* 「全てのモデルのモーションを焼き込む（IK含む）」を追加

  * 詳細な仕様は  :ref:`EFE0C3B6-39AF-4210-846A-B329D49B2611` を参照してください

仕様変更
==========================================

* モーション焼き込みをした場合上書きではなく必ず保存ダイアログを表示するようにした

  * 上書き保存によって焼き込み前のプロジェクトファイルに戻せなくなる事故を防ぐため

不具合修正
==========================================

* VMD から読み込んだモーションに対するモーション焼き込みに失敗する
* タイムラインのスクロールバーに関する以下の不具合の修正

  * ドラッグしても最初の位置に戻ってしまう
  * ドラッグするときタイムラインのリサイズも一緒に反応する
  * ドラッグするときキーフレームの範囲選択も一緒に反応する

* 動画書き出し時に1フレーム早く終了する
* macOS 版で音源にノイズがのっかる可能性のある箇所を修正
* テクスチャが見つからないかつファイル名先頭に toon が入ってると正しく処理されず該当の材質が描画されない
* 「編集」＞「ボーン」＞「数値入力ダイアログを開く」を選択すると落ちる

27.1.0 (2020/2/2)
******************************************

機能追加
==========================================

* 左側にリストカラムがあるウィンドウで上下キーで移動できるようにした

  * エフェクト画面とモデル編集画面が対象

* アクセサリの親設定ダイアログを追加

  * 「表示」のとなりにボタンを追加、そこからアクセサリの親設定が可能になった
  * 正確には 24.0 からの再実装し忘れ

不具合修正
==========================================

* キーフレーム登録または削除したモデルを削除するとクラッシュすることがある
* 設定などの別ウィンドウを表示させてフォーカスが外れた状態で左右キーを押すとシークしてしまう
* タイムラインのリサイズしたあとでもリサイズが機能したままになる
* 動画出力時「OS 付属のエンコーダを有効にする」をチェックした状態だと「ビューポートアスペクト比を維持する」が機能しない

  * この結果出力された動画が間延びして出力される問題があった

* タイムラインにおけるモデルに対する「列選択」が機能しない

27.0.0 (2020/1/29)
******************************************

機能追加
==========================================

* 物理演算のモーション焼き込み機能の追加

  * 詳細な仕様は  :ref:`F3B3AAC8-0D8C-4409-8439-8764F37F2962` を参照してください

* ウィンドウへのプロジェクトファイルのドロップを許可

  * nmm または pmm ファイルが対象です
  * メニューから読み込む場合と異なり、読み込み確認画面が出ないためドロップする前にプロジェクトを保存してください

* ウィンドウのタイトルに現在のプロジェクトのファイル名を表示するようにした

仕様変更
==========================================

* 巻き戻し処理をプロジェクト単位とモデル単位で分割

  * モデル削除後に意図せず巻き戻し処理ができてしまう結果落ちる問題の対策のため
  * アクセサリはカメラモードでしか操作できないためプロジェクト単位に編入されています

不具合修正
==========================================

* IK 有効無効の状態がフレームと正しく同期されない
* 物理演算有効時の剛体の位置及び回転の数値表示が実際の値と異なる
* モデルまたはアクセサリのパラメータ入力で値を変えずにモデルまたはアクセサリを削除をした後落ちる場合がある
* Windows 版で音源を読み込ませても音が一切鳴らない

  * 関連で音源を再生するデバイスの変更後に音が鳴らない問題も対応

    * イヤフォンジャックから外れた場合は不意の音漏れ防止のため手動で再開する必要があります

26.4.0 (2020/1/15)
******************************************

機能追加
==========================================

* タイムラインのリサイズ実装

  * タイムラインとビューポート画面の間をドラッグするとタイムラインを拡大あるいは縮小することができます

    * カーソルを当てるとスライダー部分が緑色で表示され、ドラッグすると黄色に変化します
    * デフォルトのレイアウトに戻しやすくするためデフォルトレイアウトに近い距離に移動した場合自動的にスナップする仕様になっています

      * スナップをオフにすることはできません

  * 既知の問題として拡大縮小を何回も繰り返すとビューポートが徐々に小さくなる問題があります

    * その場合は「ビューポート設定ダイアログ」から一度解像度の値を変更してもとに戻してください
    * ウィンドウを拡大縮小しても効果はないため上記手段で対処をお願いします

* 補完曲線パネルのマーカーから直接補完曲線を操作できるようにした

  * またカラーリングを変更し、升目を表示するようにした

仕様変更
==========================================

* モデルまたはアクセサリの材質の反射強度が 0 以下のとき反射色を無視するようにした

  * 従来の挙動は 0 以下のとき反射強度を 1 に丸めてから処理してた
  * 上記の挙動だと「反射自体」を無効化できないため今回の措置を実施

不具合修正
==========================================

* AutoLuminous 入れてアンチエイリアス有効で画像または動画を出力すると落ちる
* クラッシュリカバリ時に存在しないモデルまたはアクセサリの操作処理で落ちる
* IK リンクに付与ボーンが含まれるモデルの読み込みで落ちる
* モデル削除直後にメニューからエッジダイアログを開くと落ちる

  * 本来モデル削除直後に改めてモデルを選択しないままメニューからエッジダイアログを開ける事自体が意図しない挙動なので無効化

* カメラの補完曲線のパラメータを操作しても固定値に戻ってしまう
* Windows 版でマウスホイールによるビューポートのカメラズームが効かないことがある
* plugin_avfoundation/plugin_gif で動画出力すると意図しない色で出力される

26.3.0 (2019/12/30)
******************************************

機能追加
==========================================

* クラッシュレポートの送信可否設定をグローバル設定に追加

不具合修正
==========================================

* 接続剛体のないジョイントを含むモデルを読み込むと落ちる
* 配列添字未指定の初期化が含まれるエフェクトを読み込むと落ちる
* クラッシュリカバリ時に存在しないモデルまたはアクセサリの削除処理で落ちる

26.2.0 (2019/12/28)
******************************************

仕様変更
==========================================

* macOS 版で特定のフォルダから実行させた場合 Application フォルダに移動させるよ強制するメッセージを表示して終了するように

  * macOS 10.12 における起動問題の対策のため
  * 通常利用では表示されないのでもし Applications フォルダに移動させたにも関わらず表示される場合は連絡お願いします

26.1.2 (2019/12/23)
******************************************

不具合修正
==========================================

* macOS 版にも Windows 版と同じ原因で起動できない問題があった

26.1.1 (2019/12/22)
******************************************

不具合修正
==========================================

* Windows 版のみ特定条件下において起動できない

26.1.0 (2019/12/21)
******************************************

仕様変更
==========================================

* 動画出力設定画面でプラグイン経由で出力する際プラグインが設定されてない場合は出力ボタンを無効化するようにした

不具合修正
==========================================

* アクセサリまたはモデルを削除したあとにプロジェクト保存しようとすると失敗する
* 付与親ボーンがない移動付与ボーンが存在するモデルを読み込むと落ちる
* macOS 版で起動のたびに起動自体は正常にできてるにもかかわらず強制終了が表示される

26.0.1 (2019/12/14)
******************************************

不具合修正
==========================================

* macOS 版でクラッシュ発生時アプリケーションを終了することができず手動で強制終了させる必要がある

26.0.0 (2019/12/10)
******************************************

機能追加
==========================================

* キーフレームの時間軸の拡大縮小機能の実装
* 動画及び画像出力画面での「ビューポートのアスペクト比を維持」の導入

  * 従来はアスペクト比が出力解像度に依存しておりビューポートの結果とは異なるものになっていました

    * 結果として例えば 1024x768 で縦に間延びしたような出力結果となります

  * 当該機能によりビューポートのアスペクト比を維持したまま出力できるようになります

    * ビューポートのサイズを縦長にすることによりスマートフォンで使われる縦長動画を正しく出力できるようになります

  * チェックボックスを外すことにより 25.x 以前の出力と同じようにすることができます

* ボーン単位の物理演算の有効無効の切り替え

  * ボーンのキーフレームのマーカーに「X」印が追加され、物理演算が有効の場合は「X」に、無効の場合は「O」になります

    * 剛体が紐付いているボーンのみ有効です
    * 剛体が紐付いていない場合は常に「O」がつきます

  * 「ボーン」パネルに「物理」のチェックボックスを追加され、これにチェックを外した状態で「登録」することで無効化できます
  * 物理演算の有効から無効までの間は位置飛びを防ぐために線形補間で処理されます

    * 無効前の直前の有効のキーフレームがきた時点で物理演算の無効化処理されます

      * IK 処理も復活するため無効前の直前の有効のキーフレームで IK も同時に無効化したほうがよいでしょう

    * つまり実際に物理演算を無効化するタイミングから数フレーム前に物理演算有効のキーフレームを登録する必要があります

  * 無効化したボーンに紐づく剛体は「ボーン追従」と同じ扱いになります
  * 物理演算の有効無効の切り替えの情報はプロジェクト及び NMD に保存されます

     * VMD には保存されません

  * 有効から無効の間の特殊な挙動が絡む関係で直感的ではなく扱いが難しいため実際に操作して試すことを推奨します

仕様変更
==========================================

* 再生同期の方法の変更（高精度タイマー同期の導入）

  * 従来は音源の再生位置のみを頼りに同期をしていた
  * 従来の方法では音源再生の遅延により高 FPS においてカクつく問題があったため高精度タイマー同期を導入

    * 基本は高精度タイマーをベースにするが音源の再生位置とのズレが大きくなった場合は音源の再生位置を利用する

* 最大フレーム（時間単位。フレーム数ではない）を 2147483647 に制限

  * 通常利用ではまずありえないがフレームのオーバーフローを防ぐため最大値を明確に設定
  * 実時間的には約 2.3 年ほど

不具合修正
==========================================

* モデルのエッジが表示されない
* ビューポート設定後にビューポート画面のサイズが正しく設定されない
* カメラの角度設定が正しく反映されない
* plugin_lsmash 利用時に再度動画出力しようとすると落ちる

25.1.1 (2019/11/11)
******************************************

不具合修正
==========================================

* macOS 版において途中から操作を受け付けなくなってアプリが暴走することがある

25.1.0 (2019/11/7)
******************************************

機能追加
==========================================

* 任意のフレーム位置での画像出力を追加

仕様変更
==========================================

* 描画負荷軽減のため UI 描画におけるアンチエイリアスを無効にした
* 再生中は一時停止などを除いて機能を無効化するようにした

  * 再生中に発生する操作による予期しない動作を防ぐための措置
  * 単純に実装漏れによるもので再生中の操作は許可していなかった

不具合修正
==========================================

* AVI 出力した動画が再生できない
* オフスクリーンエフェクト割当が一番上にあるもの以外機能しない
* アクセサリまたはモデルのファイル名指定での CONTROLOBJECT が機能しない
* 画像出力すると常に 0 フレーム目が出力される
* macOS 版においてメニューのコピーのショートカット割当がされていない
* メニューあるいはショートカット経由でのペーストができない

25.0.0 (2019/10/22)
******************************************

機能追加
==========================================

* 材質単位でエフェクトを割り当てられるように拡張
* 画面左上に CPU使用率/メモリ利用量 を表示するようにした

  * プロジェクトメニューから表示の切り替えができます

* カメラ距離を画面上から編集できるようにした
* 設定に「モデル表示の負荷分散を有効にする」を追加

  * モデル表示が崩れる場合がある場合は無効にしてください

* タイムラインをドラッグするとキーフレームを選択できる機能を再実装

  * 24.0.0 で利用不可の状態だった

* タイムラインからキーフレームをドラッグすると移動する機能を追加

仕様変更
==========================================

* 画像及び動画書き出しの手順を変更

  * 設定ダイアログを表示して設定後ファイルダイアログを表示するようにした

* トラックパッド有無による判別を即時検知からプロジェクト作成時に変更

  * macOS Catalina 上で利用するとセキュリティ上の理由でキーボードの入力監視ダイアログが表示される問題の対策

* カメラ操作時にホイール操作と同時に SHIFT/CTRL を認識するようにした

  * SHIFT 押しながらホイール操作するとズームイン及びズームアウト早くなる（１０倍）
  * CTRL 押しながらホイール操作するとズームイン及びズームアウトが遅くなる（１０分の１倍）

不具合修正
==========================================

* オフスクリーンエフェクト利用時にエフェクト破棄で落ちることがある
* モデルのエッジ幅調整ダイアログ表示中にカメラモードに切り替えると落ちる
* プロジェクト読み込み直後のモーフ設定が反映されない
* シャドウマップが両面描画される
* PMD のトゥーンテクスチャ名の変換処理に問題があり不正な設定がされる
* アクセサリが選択されていないときアクセサリパネルを操作すると落ちる
* アクセサリの法線処理が Z 軸に対して逆に処理されていた
* アクセサリのテクスチャに Windows のパスセパレータである \\ が含まれると読み込めない
* 動画出力時に最初のフレームが欠けて出力される

  * 「OS 付属のエンコーダを有効にする」をチェックしない場合に発生する方のため 「よくある質問と回答」にあるものとは別

* フレーム位置指定でマイナス符号を入れるとフレーム位置がマイナスの状態で操作できてしまう
* エフェクト関連の不具合修正（大部分は仕様変更が絡む）

  * アクセサリまたはモデルの行列を取得しようとするとすべてゼロの行列を返す
  * 固定サイズのテクスチャでサブピクセル計算が考慮されずに処理されていた
  * CONTROLOBJECT セマンティクスで日本語が含まれたパラメータ名が取得できない
  * pow 関数で NaN を返すときの互換性問題のため NaN を返した場合 0 を設定するようにした
  * state block で TRUE があった場合正しく認識されない
  * technique において object_ss が存在しないとき object を処理するようにした
  * sampler_state 内に register があるテクスチャが処理されない
  * vector 型 (float2 -> int2) の変換の対応
  * 互換性のためグローバル変数が再定義が発生した場合エラーではなく最初の変数の定義を利用するようにした
  * half[234] 型があるとエラーになる

    * VRM 変換で付属するシェーダが当該不具合によりモデルがボーン表示のみになる問題を引き起こしてた

  * 光源の位置の処理を MMD とあわせた（ノーマライズ処理をやめた）

24.5.2 (2019/8/11)
******************************************

不具合修正
==========================================

* PMD モデル読み込み時ボーン変形がおかしくなる
* プロジェクトが読み込めない場合メモリリークを起こす

24.5.1 (2019/8/3)
******************************************

不具合修正
==========================================

* macOS 版で音源を読み込ませてない状態で再生すると物理演算が機能しなくなることがある

24.5.0 (2019/8/1)
******************************************

仕様変更
==========================================

* 頂点情報はあるが面情報がないモデルを読まないようにした
* ファイルをウィンドウにドロップしたときの挙動を変更

  * モデルが選択されている場合はファイルの拡張子をみて以下の通りに処理

    * pmd/pmx の場合はモデルとして読み込む
    * x の場合はアクセサリとして読み込む
    * nmd/vmd の場合は **モデル** モーションとして読み込む

  * モデルが選択されていない場合はファイルの拡張子をみて以下の通りに処理

    * pmd/pmx の場合はモデルとして読み込む
    * x の場合はアクセサリとして読み込む
    * nmd/vmd の場合は **カメラ** モーションとして読み込む

  * 変更前はファイルの拡張子にかかわらず全てモデル読み込みになっていた

不具合修正
==========================================

* オフスクリーンエフェクトの Main のエフェクト割当ができない
* モデル読み込み確認画面が出たままアプリケーションを終了すると落ちることがある
* 確認画面表示中に左右キーでシークができてしまう
* モデルが選択されてない状態で外部親ボタン（「外」）が押せてしまうため押すと落ちる
* nanoem から新規でカメラまたは光源のモーションを作成し保存したあと MMD で読み込めない
* モデル編集画面の衝突判定グループの表示が反転してた
* 以下の条件に該当するモデルを読み込もうとすると落ちる

  * IK リンクにひもづくボーンがない
  * ジョイント未接合

* 回転ハンドル操作時に落ちる可能性のあるところを抑制するように修正
* 選択したボーンが全て移動または回転が不可能なとき強制的にモードを「なし」に遷移するように修正
* メニュー調整

24.4.0 (2019/7/3)
******************************************

不具合修正
==========================================

* OpenGL レンダラ使用時青い画面になる
* モーフ（表情）が登録できない
* タイムラインまたは画面上から選択した単一選択のボーンが登録されない
* Windows 版で以下の修正を実施

  * 画像（動画）出力が機能しない
  * 動画出力が終了しない
  * 音源読み込み時過剰なメモリ確保が発生してた

24.3.0 (2019/6/18)
******************************************

機能追加
==========================================

* タイムライン上で上下キーを押すトラック移動できる機能を追加

  * モデルが選択されている場合はボーントラックを選択します

    * 複数選択している場合は選択状態をリセットして再選択します
    * モーフ（表情）トラックは選択の対象外です

  * 「カメラ/光源/アクセサリ」モードの場合はアクセサリトラックを選択します

不具合修正
==========================================

* 音源が読み込まれてない状態でシークすると 0 に戻ってしまう
* モデルまたアクセサリの読み込み直後メニューが無効のままになる
* ボーンの変更状態（ボーン選択時の緑表示の部分）が正しく適用されてない
* 全てのボーンを選択して登録したとき付与親の変更値が適用されてしまう
* Windows 版で以下の修正を実施

  * モデルがまったく表示されない
  * 音源のシークが正しく行われない
  * マウスホイールによるカメラズームが機能しない
  * フルスクリーン未機能

24.2.0 (2019/5/31)
******************************************

機能追加
==========================================

* ビューポート設定を追加

  * 「プロジェクト」メニューの「ビューポート設定ダイアログ」を追加
  * ビューポートの表示サイズ及び背景色の設定が可能になります
  * ビューポート設定はプロジェクトに保存されます

不具合修正
==========================================

* モデルの IK キーフレームの無効が機能しない
* ウィンドウを拡大してもビューポートが既定値以上の大きさにならない

  * 上記の「ビューポート設定」で設定してください
  * 既定値は 640x360 のため特に画面が大きいものだと小さく見えます

* VMD モーションを読み込んで nmm 形式でプロジェクト保存すると「不正なシグネチャです」エラーが出る

  * 読み込み処理の問題なので保存したプロジェクトデータは何もしなくても問題なく読み込めるようになります

* 画面左側のタイムライン上のキーフレームマークをクリックしても選択されないことがある
* メタデータがある WAV 音源を読み込むとそれが取り除かれないために最初の部分にノイズがのってしまう
* エフェクトが読み込めなかったときメモリが正しく開放されないことがある

24.1.0 (2019/5/22)
******************************************

不具合修正
==========================================

* 初回でプロジェクト保存しようとすると「nmd への変換ができません」のエラーが出る

   * nma 形式で保存した場合は当該エラーは出ない
   * 加えて後述のエラーメッセージ修正を実施

* macOS で MP3/AAC ファイルを読み込むとエラーが出る
* macOS でダイアログから wav ファイルが開けない
* 本来読み込めるファイルの拡張子が大文字だとファイルが読み込めない
* IK リストに表示される表示名が間違ってる
* エラーメッセージの修正

  * 「nmd 形式への変換は対応していません」 -> 「nmm 形式への変換は対応していません」
  * :ref:`8859DEE8-5813-4ED9-945E-0A01BCCF694A` の記載にある通り nma/nanoem 形式から nmm の変換保存はできません

* macOS 10.13 未満の場合 Metal によるスキニング高速化を無効にした

  * モデル読み込み時？に当該箇所でクラッシュする事例が確認されてるため

24.0.0 (2019/5/15)
******************************************

.. important::
    * ボーン追従の剛体に不具合があったため物理演算の計算仕様に変更あり

仕様変更
==========================================

* UI ライブラリの変更 (nuklear -> ImGui) に伴い見た目を変更

  * 追加で以下の変更を実施

    * 「モデル編集ウィンドウを開く」を「編集」メニューに追加
    * 「エフェクト設定ウィンドウを開く」を「編集」メニューに追加
    * ボーン及びモーフの操作を「モデル」から「編集」メニューに移動
    * 「モーション」を「編集」メニューに移動

      * 「キーフレームを前方に移動」を「列フレームを削除」に変更
      * 「キーフレームを後方に移動」を「空フレームを挿入」に変更

  * 他にも左右キーによる1フレーム単位の移動が簡単になった

不具合修正
==========================================

* ボーン追従の剛体がボーンの位置にめり込む場合がある
* 言語変更後モデル及びアクセサリのメニューが無効化のままになる
* 23.1.0 の修正が正しくなかった可能性が高いため別の方法で抑えるようにした
* ボーン移動時画面の端に移動させると表示位置と実際の位置がずれる
* 高解像度モードで動画出力するとキャンセルボタンが効かずキャンセルできない
* 画面右下の移動アイコンで移動する際二回目以降に移動させると開始位置が飛んでずれる
* PMM から読み込んだ後に言語設定を変更するとアクセサリの親設定がはずれる

23.2.0 (2019/3/21)
******************************************

不具合修正
==========================================

* シーク後一回モーフ変形が行われたあとに戻ってしまう
* ポーズの読み込みが正しく行われない
* エフェクト読み込むと toon テクスチャの中身がおかしくなり見た目がおかしくなる

23.1.0 (2019/3/13)
******************************************

不具合修正
==========================================

* レンダラーが Metal のとき終了時クラッシュすることがある

23.0.0 (2019/3/6)
******************************************

.. important::
    * 当該リリースからセマンティックバージョニングを採用するため 23.0.0 としました
    * 物理演算の計算方法を変更したため、前バージョンとの互換性がありません

機能追加
==========================================

* `nmm` ファイル形式の導入

  * `nma` 形式からメタデータとモーションデータのみを保存する `pmm` 形式と同種のファイルフォーマットです
  * `nma` 形式と比較して高速に保存できますが、モデルファイルや音源または背景動画のファイルを移動させると正しく読み込まれなくなります

    * `nmm` に記録されたモデルや音源または背景動画のファイルを移動させないように管理する必要があります

  * 上記の仕様の関係で `nma` 形式または `nanoem` 形式から `nmm` 形式への保存はできません

    * ただし `nmm` 形式から `nma` 形式または `nanoem` 形式の保存は可能です

* HDR 出力の対応

  * 有効にするには設定から `Color Format` より変更する必要があります
  * また、HDR 出力に対応する外部ディスプレイ及び HDR 出力が可能な Mac を利用する必要があります

    * 2019年3月現在 MacBook 系列の内蔵ディスプレイは HDR 出力に対応していません

* L-Smash プラグインを追加

  * MOV 形式で生の状態で書き出すことができます

    * QuickTime Player で再生することができます
    * iMovie に取り込むことも可能ですが、警告ダイアログが表示されるため将来的な互換性は保証されていません

  * 非圧縮の性質上、書き出された動画ファイルが非常に大きなファイルサイズになります

仕様変更
==========================================

* SDEF スキニングに対応
* 物理演算の処理を変更

  * ボーン位置合わせの剛体を再実装したため当該部分に大きな変化あり
  * 加えて重め判定するように変更

* レンダラが Metal の場合スキニングを GPU で行うように変更
* ビューポートとウィンドウの計算を分離し、ウィンドウサイズが変更されてもビューポート固定にするようにした
* 動画出力時物理演算が有効の場合強制的にトレースモードで物理演算を計算するようにした
* HockeyApp から AppCenter に移行
* 従来の「光源」を MMD にあわせて「照明」に変更

不具合修正
==========================================

* ビューポート下の数値入力を入力しても全く反映されない
* ボーンハンドルのドラッグで過剰に移動及び回転する問題

  * 本来 MMD と同じ 0.1 単位で動かすはずが 1.0 単位で動いてた

* OpenGL レンダラに切り替えようとすると終了時に落ちて設定が反映されない
* 60FPS 再生設定でカット割りを使ったシーンで視点が飛ぶ
* 動画出力時最初と最後で1フレーム余計に出力される
* 動画出力時カメラのカット割りの瞬間でエッジが極端に太く表示される
* エフェクトの TIME セマンティックで SyncInEditMode 有効時の値が間違ってフレーム数で表示されてた

  * MMD/MME では秒数で計算されるため秒数で表示するように修正

* プロジェクトファイルに背景動画が記録されない

  * nma 形式の場合、背景動画自体を保存するため元の背景動画のファイルサイズによって極端に肥大化することがあります

1.22.6.0 (2018/12/27)
******************************************

不具合修正
==========================================

* 長時間起動し続けるとメモリが異常に消費する
* 数値調整ダイアログを開いた後左右キーを押すとシークしてしまう
* nma 形式のプロジェクトファイルに拡張子がないファイルが存在すると開いた瞬間に落ちる

1.22.5.0 (2018/12/17)
******************************************

不具合修正
==========================================

* macOS 10.11 以上かつ Metal 未対応の場合起動直後にクラッシュする

  * Metal 未対応の場合はレンダラ設定に Metal が表示されなくなります

* wav 形式以外の音源を読み込みして動画書き出しをすると落ちる
* wav 形式以外の音源を読み込みしてプロジェクト書き出しすると再度読み込む時にエラーが出る
* アンチエイリアスを有効にした状態で画像出力すると意図しないもので出力される
* プロジェクト読み込み後一部メニューアイテムが無効化のままになる
* 物理演算トレースモード時にボーンまたはモーフ変形すると非常に重くなる
* 音源再生終了からまた再生しようとしてもできない
* ray-mmd 使用時にシークすると一瞬黒影っぽいものが出る

1.22.4.0 (2018/12/5)
******************************************

不具合修正
==========================================

* OpenGL レンダラを使用してる場合起動直後にクラッシュする

  * nanoem 1.21 以前からあるいは macOS 10.11 未満の利用者に影響あり
  * 1.22.3.0 で加えた内部的な変更が原因

* OpenGL で画像出力すると意図しない色で出力される
* ray-mmd 使用時にウィンドウをリサイズするとクラッシュする

1.22.3.0(2018/12/3)
******************************************

機能追加
==========================================

* 音源を流すデバイスの変更を検知するようにした

  * 再生中にヘッドフォンに切り替わった場合は一回停止してからまた再生します

    * 内蔵音源に切り替わった場合は一時停止のままになります

  * 再生中にヘッドフォンから外された場合は再生を一時停止します

* ダイアログ表示時エンターキー入力で OK を、エスケープキーニューで Cancel を認識させるようにした

不具合修正
==========================================

* 音量調整ができない
* 範囲再生を入力しても入力前の値に戻されてできない
* オフスクリーンエフェクトの読み込み時割当で大文字小文字区別してたため正しく割当されない

  * ray-mmd で影響あり

* 言語設定が英語の場合キーフレームのマーカーが表示されない
* 言語設定が英語の場合メニューのアイテム名が重複表示されてる
* 範囲選択左横にあるトラックが正しく表示されない
* 音源読み込んだ状態でシークすると非常に重くなる
* エフェクト確認画面の後に読み込み中のウィンドウが表示されない
* 加算スフィアテクスチャが見つからないとき当該部分が白飛びする

  * `おんだ式島風モデル <http://seiga.nicovideo.jp/seiga/im3868504>`_ で髪の毛が白飛びする現象が発覚したため

1.22.2.0 (2018/11/15)
******************************************

仕様変更
==========================================

* macOS 10.11 以降は Metal レンダラを優先的に使用するように変更

  * 1.22.1.0 以前を使用している場合は旧来の設定 (通常は OpenGL) を引き継ぎます

不具合修正
==========================================

* 1.22.1.0 の変更の影響で macOS 10.13 以下で起動直後に落ちることがある

  * 1.22.1.0 で一時対処のためにかけてた Metal レンダラ強制の制約を外しました

* 画像及び「OS 付属のエンコーダを使う」を無効にした状態での動画書き出しができない

1.22.1.0 (2018/11/13)
******************************************

不具合修正
==========================================

* 画面が全く表示されない

  * 少なくとも Mojave で確認したがそれ以外で発生するかどうかは未確認
  * macOS 10.11 以降で Metal レンダラを強制するようにいったん対策

    * 既存の不具合にあるとおり「OS 付属のエンコーダを使用する」を無効にした動画出力及び画像出力ができないため要注意

1.22.0.0 (2018/11/11)
******************************************

.. important::
    * Retina 環境において高解像度になってなかった不具合がありました

      * もし重いと感じたら低解像度モードで動かしてください

    * Mojave 以降で OpenGL 実装の仕様変更によるものか常時高負荷になる不具合がありました

      * Mojave で使用する場合は 1.22 以降の利用を強く推奨します
      * 1.21 以前で引き続き使用したい場合は Mojave へのアップグレードを控えてください

        * もし上げた場合は設定変更よりレンダラを OpenGL から Metal に変更してください

    * キーフレーム補間処理にずれが生じる不具合がありました

      * 1.21 以前から読み込むとモーション再生時の見た目が変わることがあります

機能追加
==========================================

* オフスクリーンエフェクト使用時のオブジェクト割当画面を追加

  * MME にある材質ごとの割当は現在未実装

仕様変更
==========================================

* 再生時音源の読み込みがない状態でもダミーの音源を入れるようにした

  * 常に音源がある状態で動作が一貫するようになった

* ファイル読み込み、保存、終了時に処理ダイアログを画面上部中央に表示するようにした

不具合修正
==========================================

* Retina の高解像度モードではなく低解像度モードで動作してた
* エフェクトのパラメータ変更が効かない
* エフェクトの CONTROLOBJECT の item に日本語名が用いられると正しく認識しない
* エフェクトパッケージに含まれるエフェクトが機能しない

  * ただし AutoLuminous4 の AutoLuminousBasic.fxn ファイルに問題があり今回の不具合修正を持ってしても復元できない
  * AutoLuminousBasic.fxn を使ってる場合はオリジナルの AutoLuminousBasic.fx を利用してください

* macOS 10.14 Mojave 以降でレンダラが OpenGL の場合常に垂直同期が無効になり CPU 使用率が 100% に張り付く
* 言語が日本語以外でモデル名及びトラック名が正しく表示されない
* 線形補間チェックがひとつ前のキーフレームを見ていたためキーフレーム補完処理がずれてた
* 音源を読み込むと CPU 使用率が 100% に張り付く
* プロジェクトにオフスクリーンエフェクト及び割当られたエフェクトを正しく保存するように
* プロジェクト読み込むと読み込み前の情報も引き継がれてしまう
* プロジェクト新規作成または読み込みをすると左カーソルで操作できなくなる

1.21.0.0 (2018/6/24)
******************************************

仕様変更
==========================================

* エフェクトプラグインのサンプラー関連処理を修正

  * 水面エフェクトがおそらく動くようになったかもしれない

不具合修正
==========================================

* カテゴリ単位でモーフが存在しないモデルを操作するときモーフパネルからウェイトを変更したり登録ボタンを押すと落ちる
* ボーンが一切存在しないモデルを読み込むと落ちる
* 外部親が動作しない
* アクセサリのテクスチャが反転表示される
* ボーンの移動及び回転ハンドルが動かない

1.20.0.0 (2018/6/10)
******************************************

機能追加
==========================================

* ビュー画面に「モデル」と「ボーン」を追加

  * 特定のボーンを動かすとカメラも追従する形

* ファイルメニューの出力に「モデル」を追加

  * 起動時に「モデル編集機能」がチェックされてないと表示されない仕様
  * pmx 出力のみ

仕様変更
==========================================

* 地面影とセルフシャドウを同時利用出来るようにした

  * MMD とあわせた

* セルフシャドウの描画処理を修正

  * 裏面を描画してたため表面を描画するように修正

* 「照明」表記を「照明」表記に変更
* アンチエイリアス設定を初期状態で無効にするように変更

  * 高負荷の主要因になっているため

* 画面中のモデル及びアクセサリの読み込みボタンを押したとき OS 標準のファイルダイアログ開くように変更

不具合修正
==========================================

* セルフシャドウが描画されない
* 共有トゥーンが機能しない
* エフェクト読み込み時のクラッシュ率を下げた

1.19.4.0 (2018/6/10)
******************************************

不具合修正
==========================================

* モーションを読み込むと物理演算が無効にされる
* モデルテクスチャが正しく表示されないことがある

  * 例: アリシア・ソリッド

* TIME セマンティクスが正常に機能しない

1.19.3.0 (2018/5/31)
******************************************

不具合修正
==========================================

* nanoem 形式で保存するとプロジェクトが空で保存される
* クラッシュ後モーション関連の操作で復元できないことがある

1.19.2.0 (2018/5/8)
******************************************

仕様変更
==========================================

* 数値編集フォームで ESC キーを押すことで入力を外せるようにした

不具合修正
==========================================

* 旧来の nanoem 形式でのプロジェクトの保存ができない
* ボーンモーフが機能しない
* 60FPS 設定でも 30FPS 相当で再生される
* モーフのウェイトにあるような左右ボタンがついてる数値編集フォームでの入力で左右キーを押すと同時にシークする

1.19.1.0 (2018/4/18)
******************************************

不具合修正
==========================================

* 英語設定かつモデル側に英語表示名が入ってないときそのまま空表示される

  * 英語表示名がないときは日本語表示名で代替するように

* シャドウマップが有効のとき突然落ちることがある

1.19.0.0 (2018/4/11)
******************************************

機能追加
==========================================

* キーボードの左右ボタンでのシークが入力状態ではない限り画面上どこでも出来るようにした
* フレーム表示の左右にキーフレーム単位で移動出来るボタンを追加
* 補間曲線に緑のマークを設け、補間曲線上どこにいるかわかるようにした
* 補間曲線に数値入力を設けて直接数値編集出来るようにした
* プロジェクト設定に言語を追加し動的に変更出来るようにした
* キーフレームを delete または backspace キーで削除できるようにした

仕様変更
==========================================

* 従来の補間曲線の計算方法にミスがあり、前のキーフレームから計算するように変更

  * 間違えて次のキーフレームから計算して補間してた
  * キーフレームが線形補間の場合は影響ない

不具合修正
==========================================

* 物理演算設定ウィンドウなどで OK を押すと落ちる
* プロジェクト保存確認後に落ちる
* 選択モード時にボーンをコピーすると落ちる
* 動画出力時にキャンセルすると落ちる（問題の暫定対策）

  * こちら事象を再現出来てないため原因と思われる箇所の対策を実施、防げてるかどうかは不明

* 選択表示で一定以上の長さを持つ文章で表示が途切れる
* モーフ選択時にスライダーのところにカーソルをあわせるとボーンの接続表示が切れる
* ツールチップの表示が途切れる
* 「選択されているモデルを削除」または「選択されているアクセサリを削除」で確認画面が表示されず削除される
* ポーズファイルをよみこむとフリーズする
* キーフレーム前方移動でキーフレームが上書きされる場合で Undo しても上書き元のキーフレームが復元されない
* 英語設定でプロジェクト保存するとモデルモーションが復元されない
* アクセサリの screen.bmp が反転してる
* Metal 利用時全てのエフェクトが `Invalid SPIRV Format` と出て読み込めない
* OpenGL 以外でのエフェクト未使用時のシャドウマップによる影のつきかたが明らかにおかしい

1.18.1.0 (2018/3/13)
******************************************

不具合修正
==========================================

* macOS Sierra (10.12) 以前で動画出力しようとするとクラッシュする

1.18.0.0 (2018/3/9)
******************************************

機能追加
==========================================

* プロジェクトのクラッシュリカバリ

  * 詳細は :ref:`C56F44D5-C1AC-45FC-B30A-C86DF0BFBB95` にて

* 新方式の動画出力

  * 従来より細かく設定でき、かつ高速に処理可能

仕様変更
==========================================

* アクセサリの裏面を描画しないように
* カメラの移動及び回転を左クリックではなく右クリックに変更

  * ただし MBA/MBP の Trackpad 「のみ」の場合は従来の左クリック

* MMD との操作互換改善

  * ボーン選択モードで重なってるボーンをクリックすると後ろのボーンを選択する仕様に変更
  * アイコンハンドルからの操作で Ctrl キーで 10 倍、 Shift キーで 1/10 倍移動するように変更
  * 背景動画読み込んだあと右上のカメラアイコンに Shift キーを押すと拡大及び移動出来るように変更

不具合修正
==========================================

* 「Unicode 文字列のデコードに失敗しました」エラーの抑制
* ボーンまたはモーフを移動させると元の位置に戻ってしまう
* 特定のモデルで「不正なシグネチャです」と表示され読み込めない
* テクスチャの透過部分で汚れが生じることがある
* モデルが白飛びすることがある
* 確認画面表示中に操作が出来てしまう
* RGBA 形式以外のテクスチャを使うエフェクトを読み込むと高確率で落ちる

1.17.3.0 (2017/12/25)
******************************************

不具合修正
==========================================

* メニュー経由から各種モーションを開くことが出来ない

1.17.2.0 (2017/12/8)
******************************************

機能追加
==========================================

* エフェクトの再読込機能

  * エフェクト読み込み後に現れる左上のアイコンをクリックすると「エフェクトの再読込」ボタンが表示されます

    * （直接エフェクトファイルを開く手段がない）プロジェクトファイルから開いたときは表示されません

  * エフェクトファイルの変更を反映させるために使用します

    * 本当はファイルの変更を検知したら自動的に再読込する仕組みにしたいがまだ出来てないため、いったん手動で読み込みする機能として実装

不具合修正
==========================================

* Retina 含む高解像度環境において起動直後に落ちる
* バックグラウンドに回ると CPU が高負荷になる

1.17.1.0 (2017/11/27)
******************************************

不具合修正
==========================================

* 起動直後に落ちることがある
* 複数のポストエフェクトを適用しても最初しか適用されない
* 音源付きで動画出力するとノイズがのる
* レンダラが Metal のとき動画出力が正しく行えない

1.17.0.0 (2017/11/23)
******************************************

仕様変更
==========================================

* 組み込みフォント変更

  * `源暎ゴシックP <https://okoneya.jp/font/genei-gothic.html>`_ を採用しました

* エッジ幅の計算式を変更

  * 視野角を考慮するように変更し、視野角が小さい場合エッジ幅が太くなる問題を対処

* エラーを少しわかりやすくするように

  * いままでエラー番号しか出してなかったがエラー番号に対応する文字列を表示するように

* 動画出力時キャンセル出来る実装に戻した

* 以下の機能を削除（保守状態に問題あるため）

  * 頂点シェーダスキニングの有効化
  * コンピュートシェーダスキニングの有効化

不具合修正
==========================================

* 動画読み込み機能の修復

  * ついでに大幅に高速化

* 起動直後の CPU 負荷を大幅削減
* モデルのエッジ幅がモデルメニューに入ってない
* 視野角を変更するカメラモーション使うとカメラの動きがぎこちなくなる
* フレームレートを 60FPS または無制限に変更すると終了位置が本来の倍になる
* プロジェクトファイル開いた後のカメラの視野角が 0 になる
* 古いプロジェクトファイル開いたときの視野距離がおかしい
* ポーズファイルが読み込めない
* UI 上の `?` 表示頻度を減らした

1.16.2.0 (2017/9/25)
******************************************

不具合修正
==========================================

* テクスチャが正しく読み込めていない場合がある

* 1.16.1 で発生したエンバグ

1.16.1.0 (2017/9/22)
******************************************

不具合修正
==========================================

* 外部親変形のうち設定したボーンが変形していない
* 音源再生の同期が正しく行われてない
* 音源読み込み後の終端フレーム位置が更新されない場合がある
* wav 音源が選択できない
* ペーストが常に反転ペースト扱いになる
* Metal でのポストエフェクト読み込み時正常に表示されないことがある

1.16.0.0 (2017/9/15)
******************************************

機能追加
==========================================

* Metal 対応
* タイムラインのキーフレームの範囲選択

  * タイムラインのキーフレームがある部分をドラッグすることで赤い矩形が表示される
  * 赤い矩形内に入った部分のキーフレームが自動的に選択される

* モデル編集（仮実装）
* エッジ幅を変更する機能を実装
* 編集時フレームレートを追加

  * `自動/30FPS/60FPS/無制限` から選択可能
  * 自動は電源かバッテリーかで自動的にフレームレートを選択する仕組み

仕様変更
==========================================

* 保存時従来の `nanoem` ではなく `nma` 形式にするように変更
* ボーン及びカメラのパラメータ編集ダイアログでキャンセル時ロールバック出来るように
* 画面左下に現在のフレームレートを表示するようにした
* 再生中スリープやスクリーンセーバが起動しないようにした
* フレームレートを表記通りに再生するようにした
* ヘルプメニューのオンラインドキュメントの URL を `nanoem.readthedocs.io <https://nanoem.readthedocs.io>`_ に変更
* トラッキング情報の追加

  * 起動時の mac のハードウェアモデル名
  * エラー発生時の情報

不具合修正
==========================================

* 音源読み込まれたあと再開出来ない
* PMM 読み込み時アクセサリのキーフレームから復元した透明度がおかしい
* 拡張子が大文字の場合読み込めない
* 潜在的にクラッシュする可能性がある部分の修正
* メモリリークを起こしている部分の修正

1.15.1.0 (2017/4/10)
******************************************

実装
==========================================

  * 反転ペースト（ボーン及びキーフレーム）

不具合修正
==========================================

  * 設定画面などのダイアログを閉じた後ボタンなどが反応しなくなる
  * ペースト後の回転の値がおかしい
  * コピー/ペーストする際に黒い画面が一瞬映ることがある
  * セルフシャドウモーションのキーフレームが選択されない

1.15.0.0 (2017/5/25)
******************************************

* UI を MikuMikuDance とあわせる形で刷新
* pmm 読み込み対応

  * 保存は現段階で未対応

* 以下の機能を追加

  * キーフレーム補正

     * ※バイアスが入ってるが現時点で未対応

  * 特定のモーフカテゴリを全て削除
  * 全てのモーフのキーフレーム登録
  * 物理演算の常時オン

* トラッキング処理を追加

  * 詳細は[トラッキングについて](tracking.md)を参照

プレリリース時代の情報は「`nanoem 1.15.0.0 プレリリース版 <https://potmum.dokku.hikarin.jp/@shimacpyon/items/6d899e692c8b4b81963320f8179f9557>`_」を参照

1.14.2.0 (2017/4/10)
==========================================

* モデル編集モードで剛体表示を有効にすると落ちる不具合の修正
* プロジェクト保存後にプロジェクト読み込むとテクスチャが反映されない不具合の修正
* nma 形式で保存すると壊れて読み込めない不具合の修正

既知の不具合
------------------------------------------

* 動画出力後マウスが反応しない

  * 回避策として下のタイムラインから「カメラ」または「照明光」をクリックすると再び反応するのでそれで対処をお願いします

1.14.1.0 (2017/1/13)
==========================================

* プロジェクト上書き保存すると保存したファイルが壊れる不具合の修正
* エフェクトプラグインの以下の不具合修正

  * CONTROLOBJECT をループ対象に出来ない不具合

1.14.0.0 (2017/1/4)
==========================================

* 拡張子が fx のエフェクト読み込み時にエフェクトプラグインが無効の場合確認ダイアログを出すように

  * プロジェクト設定でエフェクトプラグインを有効にする手間を省くために導入

* UI の配置変更

  * 以下の設定を「設定」から「プロジェクト」に移動

    * グリッド
    * 背景色の黒化

  * シーク確認を「プロジェクト」から「設定」に移動

    * シーク確認
    * カメラ共有
    * シェーダスキニングの有効化

  * 使用頻度が高いと判断したものを「プロジェクト」に、逆に低いと判断したものを「設定」に移動した形です

* モデル編集する際に確認ダイアログを表示するように

  * これまでモデル読み込み後右側のパネルですぐにモデル編集画面が表示されましたが、代わりにボタンが表示されます

    * OK をクリックするとモデル編集画面が表示されるようになります
    * 現状は確認ダイアログの状態を保存していないため起動する度に確認ダイアログが表示されます

  * モデル編集機能はまだ中途半端な出来だぞ？そもそもモデル改造の項目を確認したのか？で流入を抑えるための機能です。

* プロジェクトに一回保存して読み込むときエフェクトが反映されない不具合の修正
* 新規プロジェクト作成時にグリッド表示が消える不具合の修正

1.13.0.0 (2016/12/11)
==========================================

* Windows 版のリリース
* 動画出力で zip 形式で出力できるプラグインを追加

  * 出力される zip に wav 形式の音源とフレーム毎の連番bmpを格納する形です
  * 直接再生することが出来ないので動画編集ソフトを使用して上記を取り込んで動画を作成する必要があります

* エフェクト設定画面でレンダーターゲット表示できるように
* 補完設定を開くと落ちる不具合の修正
* 特定のモデルで読み込むと落ちる不具合の修正
* エフェクトプラグインの不具合修正
* キーフレーム削除時タイムラインのマーカーが消えない不具合の修正
* 高解像度出力で落ちる不具合の修正

  * これにより Retina Display 対応 Mac において低解像度モードで出力云々の文言を削除

1.12.0.0 (2016/8/21)
==========================================

* MME 形式のエフェクトを直接読み込める機能を追加

  * 「プロジェクト」の「エフェクトプラグインを有効」で有効にする必要があります

* ボーン選択を解除すると落ちる不具合の修正
* プロジェクト保存時エフェクトが含まれると保存できない不具合の修正
* 動画書き出しで物理演算が行われない不具合の修正
* Retina 環境でモデル読み込み確認ダイアログの表示がおかしくなる不具合の修正

  * 動画出力についてはまだ未対応のため動画出力時は `低解像度モード <https://support.apple.com/ja-jp/HT202471>`_ で行ってください

* アクセサリの値設定を undo/redo 出来るようにした
* `.nmd` 形式のモーションが読み込めていなかった不具合の修正
* 開閉可能なパネルを分離可能にするようにした

1.11.2.0 (2016/5/22)
==========================================

* 画像及び動画書き出しの処理の全面的な見直し

  * 画像書き出しが意図通りに行えてなかった不具合の修正
  * 動画出力時に落ちることがある不具合の修正
  * 出力後のアスペクト比がおかしいがために歪んでた問題を修正
  * ウィンドウサイズ以上の書き出しが行えるように仕様変更
  * 画像及び動画出力時のダイアログを表示するように変更

* ダイアログ表示中の処理を抑制するように仕様変更

1.11.1.0 (2016/5/9)
==========================================

* プロジェクト読み込み時音源が読み込まれない不具合の修正
* ファイルからオフスクリーン利用のポストエフェクトを読み込んだ時機能しない不具合の修正
* 音源が読み込まれていない場合はボリュームスライダーを非表示にするように変更

  * 従来はボリュームスライダーが表示されていたが実装仕様上調整出来ない問題があったため

* 動画をクリアしても復活してしまう不具合の修正

  * 関連で音源のクリアを追加

* 翻訳漏れの部分修正

1.11.0.0 (2016/5/7)
==========================================

* 動画出力時の音声同時出力の対応

  * gif 出力も追加しました

* あたらしいモーション形式 NMD (Nanoem Motion Data) の実装

   * 特徴

    * アクセサリのモーションが保存可能
    * モデルのボーン名が8文字以上でも保存可能
    * VMD より平均 10% 以上小さいファイルサイズで保存可能
    * NMD は VMD の上位互換にあたるため、VMD から NMD は可能
    * NMD から VMD の変換 NMD 特有の情報を除いて保存される

  * 1.11 以降のプロジェクト内のモーションはすべて NMD 形式で保存されます

* PMD モデルの物理演算が崩壊する不具合の修正
* 物理演算を調整
* エッジ表示の調整

  * エフェクト適用時と同じロジックを使うように変更
  * 副作用としてカメラでのズーム処理が重くなります

* 確認画面表示の見た目を変更
* 高解像度適用時に文字表示がぼける不具合の修正

  * 高解像度 = Retina のことです

* カメラ操作時タイムライン操作すると Undo に追加される不具合の修正
* 照明光のキーフレームをコピペすると落ちる不具合の修正
* 変形順操作で落ちる不具合の修正
* 剛体のデバッグ表示機能の追加

1.10.3.0 (2016/2/14)
==========================================

共通
------------------------------------------

* シーク時確認をデフォルトで無効にするように仕様変更

  * 新規作成時のみ。プロジェクト読み込みは影響ありません

* UV モーフが正しく動作しない不具合の修正
* テクスチャ係数が1以外の材質モーフ操作時の不具合の修正
* タイムラインのトラックをクリックすると落ちる不具合の修正

OSX 版
------------------------------------------

* 読み込むと本来にエラー表示になるはずのプロジェクトを読み込むと落ちる不具合の修正

1.10.2.0 (2016/1/24)
==========================================

共通
------------------------------------------

* カメラの補間設定画面を開くと落ちる不具合の修正

  * カメラ及び照明光モーションのキーフレームが登録できない不具合の修正

* screen.bmp のテクスチャが機能しない不具合の修正
* キーフレームシフトが意図しない挙動になってた不具合の修正

  * 実質的にキーフレームの削除になっていたため書き直し
  * 前シフト時にキーフレームが重なる場合既存のキーフレームが優先されます

    * 例: フレーム番号2のキーフレームを前シフトする際にフレーム番号1のキーフレームがあった場合1の方は残り2の方は削除

* 特定条件下のモデルが読み込めない不具合の修正

1.10.1.0 (2016/1/18)
==========================================

共通
------------------------------------------

* 重力設定しようとすると落ちる不具合の修正
* グループモーフが過剰適用されてしまう不具合の修正
* アクセサリの情報をプロジェクトに保存するように変更

  * 「既存の不具合」にあるとおり現時点ではモーションとして保存されません

1.10.0.0 (2016/1/17)
==========================================

共通
------------------------------------------

* UI ライブラリの変更

  * 配置構成を変更
  * ボーンとアクセサリの数値直接入力の実装
  * 補間設定を別ウィンドウとして分離

* 物理演算の挙動変更

  * 重力設定を以前と比較して実際の値に対して5倍適用するように変更
  * 回転のみ適用する剛体が正しく動いていなかった問題を修正したかもしれない

* undo からの redo 時に IK ボーンが正しく復元しない不具合の修正
* グループモーフが正しく動作しないことがある不具合の修正

OSX 版
------------------------------------------

* プロジェクト内のカメラまたは照明のモーションが正しく読み込めない時落ちる不具合の修正

1.9.2.0 (2015/10/24)
==========================================

共通
------------------------------------------

* GPU スキニングをデフォルトで無効に

  * モデル破綻するバグが発生したため

OSX 版
------------------------------------------

* エッジが不必要に太くなる不具合の修正

1.9.1.0 (2015/10/21)
==========================================

1.9.0.0 はリリースビルドに不具合が発覚したため未リリース

共通
------------------------------------------

* エフェクトの実装

  * ※ MME とは互換性無し

* タイムライン上の音源波形描画の実装

  * 音源を読み込むとタイムライン上に波形が描画されます

* モデルのテクスチャの差し替え機能の実装

  * モデルを選択した状態で右パネルの「材質」から材質を選択し、テクスチャのファイル名をクリック

* ファイルダイアログでスクロールした位置を記憶するようにした
* PMD モデルが読み込めない不具合の修正
* 加算スフィアテクスチャを持つモデルを読み込むと透明表示になる不具合の修正
* 変更を行ったモデルをプロジェクトに保存できない不具合の修正
* アクセサリが過剰に白飛びする不具合の修正
* ウィンドウサイズを変更すると画面表示がおかしくなることがある不具合の修正

OSX 版
------------------------------------------

* 64bit 版の動作要件を 10.9 以上に引き上げ
* "./" または ".\" で始まるテクスチャ名を持つモデルがプロジェクトに保存出来ない不具合の修正
* モデル、アクセサリ、テクスチャのいずれかにシンボリックリンクが含まれるプロジェクトを読み込むと落ちる不具合の修正
* 一度再生して一時停止または停止後にフルスクリーンに切り替えると勝手に再生される不具合の修正
* 必要以上に再生またはシークの確認ダイアログが表示されてしまう不具合の修正
* 画像出力時 UI 表示有効で行うと不正なスケールで画像が出力される不具合の修正

1.8.0.0 (2015/8/13)
==========================================

共通
------------------------------------------

* セルフシャドウの実装を MMD とだいたい同じ形に
* ウィンドウを閉じるとクラッシュする不具合の修正
* デバッグ描画が行われない不具合の修正

OSX 版
------------------------------------------

* 濁点または半濁点を含むファイル名のテクスチャを読み込めない不具合の修正
* プロジェクトからモデルやアクセサリやモーションを削除する際に物理的に削除されない不具合の修正

1.7.0.0 (2015/7/12)
==========================================

共通
------------------------------------------

* モデルのパラメータ編集を部分的に実装
* 複数のモーフのパラメータ変更後の Undo の挙動の不具合を修正
* 左下の変形アイコンから回転を操作した時正しく変形されない不具合を修正

OSX 版
------------------------------------------

* テクスチャがフォルダ以下に格納されているモデルまたはアクセサリをプロジェクトに正しく保存及び読み込みが出来ない不具合の修正

  * 1.6.1.0 以前で保存したプロジェクトは間違ったパスに保存されているため、そのままでは読み込めません
  * 拡張子 nanoem を「パッケージの内容を表示」で開き、`Model` フォルダに保存されているテクスチャのフォルダを記号名のフォルダに格納し直す必要があります

* 動画出力時の出力サイズ指定を追加

  * 今回の変更により現在のウィンドウサイズではなく上記の出力サイズで出力するように変更

1.6.1.0 (2015/6/28)
==========================================

OSX 版
------------------------------------------

* メニューからのポーズの読み込み及び保存の実装
* Apple ProRes エンコードの実験的追加

  * 動画出力時の拡張子を以下にすることでそれぞれの形式でエンコード可能です

    * `apcn` (Apple ProRes 422 Standard Definition)
    * `ap4h` (Apple ProRes 4444)

* プロジェクト保存時アクセサリを含むとクラッシュする不具合の修正
* プロジェクト保存時別フォルダの中にテクスチャが入るモデルとアクセサリが保存出来ない不具合の修正
* ウィンドウのサイズ変更または最小化すると落ちる不具合の修正

共通
------------------------------------------

* プロジェクト設定の項目に以下を追加

  * シェーダスキニングを有効

    * 使用する環境によってモデルを読み込むと表示が崩れる際に無効にすること

  * シーク時確認

    * シークする時確認ダイアログがうざったく感じる時に無効にすること

* アンドゥ時のモデルの変形が意図する通りに巻き戻らない不具合の修正
* モーフ変更後のキーフレーム登録が正しく行われていなかった不具合の修正

  * これに伴い、モーフのウェイト値が変更前と同じだった場合アンドゥに積まないように仕様変更

1.6.0.0 (2015/6/21)
==========================================

OSX 版
------------------------------------------

* プロジェクトを一回閉じてまた開くと落ちる不具合の修正
* プロジェクトを一回開いて別のプロジェクトを開くとただしく表示されず不正終了する不具合の修正
* カメラ及び照明のモーションがプロジェクト内に正しく保存されない不具合の修正
* カメラ及び照明のモーションが出力できない不具合の修正
* 動画出力時カメラのスクロールが出来てしまう不具合の修正
* モデルごとのカメラ情報をプロジェクトに保存して復元できるように変更
* 64bit 版での背景動画表示をフレーム単位で表示できるように修正

  * ※処理上の都合ですごく遅いのでトレース用途と割りきって下さい

* 32bit 版で動画出力が行えるようにした

共通
------------------------------------------

* 地面影の実装

1.5.0.1 (2015/6/15)
==========================================

OSX 版
------------------------------------------

* パネルにあるダイアログからフォルダ移動するとクラッシュする不具合の修正

1.5.0.0 (2015/6/14)
==========================================

OSX 版
------------------------------------------

* zip 内のテキストファイルを開くとクラッシュする不具合の修正
* アクセサリのファイル名で濁点半濁点があると分離表示されてしまう不具合の修正
* プロジェクト内に照明及びカメラモーションを保存できるように修正
* 動画出力時物理演算が行われない不具合の修正
* 動画出力時フレーム飛びが発生する不具合の修正

共通
------------------------------------------

* ボーンリセットの実装

  * モデルのボーンメニューに追加されます

* スペキュラまわりのシェーダの修正
* モデル半透明の実装

  * キーボードショートカットの `V` で半透明に出来ます

* トゥーンを常時有効にするように仕様変更
* 「全ての未登録のボーンを選択」を追加
* 右下のハンドルの表示変更
* シークバーに再生ボタンを追加
* ボーン未選択時登録ボタンを無効にするように仕様変更
* 背景画像指定の実装

  * 現状「動画」から動画の他に画像が指定出来るようになっています
  * 画像読み込んだ後に動画を読み込ませた場合動画が優先的に表示されます

* モデルパネルの材質を表示するとクラッシュする不具合修正
* エッジ幅指定を実装

  * モデルの「キーフレーム設定」の中にあります
  * エッジ幅は現状プロジェクトに保存されません

* シーク警告を各モードで確認するように変更

  * カメラ、照明、モデルの各モーションでキーフレーム未登録をチェックするように変更されます

    * 従来は全てのモーションをチェックして一律シーク警告を表示してました

* 動画出力時カメラが動かせてしまう不具合の修正
* キーフレーム登録時のベジエ曲線自動分割の暫定実装

  * ボーン移動のみです

* カットの暫定実装
* キーフレーム削除時マーカーが削除されない不具合の修正
* プロジェクトパネルのプロジェクト及びモーション保存機能の無効化

1.4.0.0 (2015/6/1)
==========================================

最初の公開版

1.3.0.0 (2015/5/17)
==========================================

(非公開)

1.2.0.0 (2015/3/15)
==========================================

(非公開)

1.1.0.0 (2015/3/9)
==========================================

(非公開)

1.0.0.0 (2015/3/7)
==========================================

(非公開)
